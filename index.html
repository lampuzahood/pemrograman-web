<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğ‘­ğ‘²ğ‘³ğ‘¯ ğ‘ºğ’Œğ’Šğ’ğ’”</title>
    <link rel="stylesheet" href="./css/styles.css" />
    <link rel="stylesheet" href="./css/product.css" />
    <link href="https://fonts.googleapis.com/css2?family=Orbitron&display=swap" rel="stylesheet">
    <script src="./js/product.js"></script>
    <script src="./js/products.js"></script>
    <script src="./js/beli.js"></script>
  </head>
  <body>
    <div class="toast" id="popup">
      <span id="popup-message"></span>
    </div>
    <header>
      <div class="container">
        <a href="index.html">
          <h1 class="logo">faklahskin store</h1>
        </a>
        <nav>
          <ul>
            <li>
              <a href="index.html">Beranda</a>
            </li>
            <li>
              <a href="produk.html">Produk</a>
            </li>
            <li>
              <a href="tentang.html">Tentang</a>
            </li>
            <li>
              <a href="kontak.html">Kontak</a>
            </li>
            <li>
              <a href="keranjang.html" style="position: relative;"> ğŸ›’ <span id="keranjang-count" style="
              background: red;
              color: white;
              border-radius: 50%;
              padding: 2px 6px;
              font-size: 12px;
              position: absolute;
              top: -10px;
              right: -10px;
              z-index: 10000; /* Below navbar */
            ">0</span>
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </header>
    <section class="hero">
      <div class="container">
        <h2>Temukan Skins Menarik</h2>
        <p>Produk terbaik, desain modern, dan pengalaman belanja tanpa batas.</p>
      </div>
    </section>
    <section class="banner">
      <div class="container">
        <img src="https://down-spe-id.img.susercontent.com/id-11134210-7rasm-m25lwtv1vw5m80.webp" alt="Banner Utama" class="banner-img">
      </div>
    </section>
    <section class="products container">
      <h3>Produk Populer</h3>
      <div class="view-toggle">
        <button class="view-btn active" data-view="grid">Grid View</button>
        <button class="view-btn" data-view="list">List View</button>
        <select id="itemsPerPageSelect">
          <option value="5">5 per page</option>
          <option value="12" selected>12 per page</option>
        </select>
      </div>
      <div class="product-grid" id="productGrid"></div>
      <div class="pagination" id="pagination"></div>
    </section>
    <section class="statistik container">
      <h2 class="statistik-title">Statistik Toko</h2>
      <div class="statistik-grid">
        <div class="statistik-card">
          <h3 class="statistik-number">5000+</h3>
          <p class="statistik-label">Penjualan</p>
          <button class="statistik-btn" onclick="tampilkanChart('penjualanChartContainer')">Lihat Detail</button>
          <div class="chart-container" id="penjualanChartContainer" style="display:none;">
            <canvas id="penjualanChart" width="300" height="200"></canvas>
          </div>
        </div>
        <div class="statistik-card">
          <h3 class="statistik-number">1000+</h3>
          <p class="statistik-label">Stok Produk</p>
          <button class="statistik-btn" onclick="tampilkanChart('stokChartContainer')">Lihat Stok</button>
          <div class="chart-container" id="stokChartContainer" style="display:none;">
            <canvas id="stokChart" width="300" height="200"></canvas>
          </div>
        </div>
        <div class="statistik-card">
          <h3 class="statistik-number">1200+</h3>
          <p class="statistik-label">Penilaian</p>
          <button class="statistik-btn" onclick="tampilkanKomentar()">Tampilkan Komentar</button>
          <select id="filterRating" onchange="renderKomentar()">
            <option value="all">Semua Rating</option>
            <option value="5">â˜…â˜…â˜…â˜…â˜…</option>
            <option value="4">â˜…â˜…â˜…â˜…â˜†</option>
            <option value="3">â˜…â˜…â˜…â˜†â˜†</option>
            <option value="2">â˜…â˜…â˜†â˜†â˜†</option>
            <option value="1">â˜…â˜†â˜†â˜†â˜†</option>
          </select>
          <div id="komentarContainer" style="display: none; margin-top: 20px;">
            <table class="tabel-komentar">
              <thead>
                <tr>
                  <th>Username</th>
                  <th>Rating</th>
                  <th>Komentar</th>
                </tr>
              </thead>
              <tbody id="komentarTableBody" class="komentar-body"></tbody>
            </table>
            <div id="pagination" class="pagination-komentar"></div>
          </div>
        </div>
      </div>
    </section>
    <footer>
      <div class="container">
        <p>Â© 2025 FKLH SKINS</p>
      </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        function buyNow(nama, harga) {
          tambahKeKeranjang(nama, harga);
          window.location.href = 'keranjang.html';
        }
        // Event listeners for buttons
        document.querySelectorAll('.btn-tambah').forEach(button => {
          button.addEventListener('click', () => {
            const nama = button.dataset.nama;
            const harga = button.dataset.harga;
            tambahKeKeranjang(nama, harga);
          });
        });
        document.querySelectorAll('.btn-beli').forEach(button => {
          button.addEventListener('click', () => {
            const nama = button.dataset.nama;
            const harga = button.dataset.harga;
            buyNow(nama, harga);
          });
        });
        // Chart functionality
        let penjualanChartLoaded = false;
        let stokChartLoaded = false;

        function tampilkanChart(containerId) {
          const container = document.getElementById(containerId);
          const chartId = container.querySelector('canvas').id;
          container.style.display = container.style.display === 'block' ? 'none' : 'block';
          if (chartId === 'penjualanChart' && !penjualanChartLoaded) {
            const ctx = document.getElementById(chartId).getContext('2d');
            new Chart(ctx, {
              type: 'bar',
              data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun', 'JÂ onuli', 'Agust', 'Sep', 'Okt', 'Nov', 'Des'],
                datasets: [{
                  label: 'Jumlah Penjualan',
                  data: [500, 700, 800, 600, 900, 1200, 1645, 2120, 1800, 2000, 3029, 2257],
                  backgroundColor: 'rgba(54, 162, 235, 0.6)'
                }]
              },
              options: {
                responsive: true,
                maintainAspectRatio: false
              }
            });
            penjualanChartLoaded = true;
          }
          if (chartId === 'stokChart' && !stokChartLoaded) {
            const ctx = document.getElementById(chartId).getContext('2d');
            new Chart(ctx, {
              type: 'pie',
              data: {
                labels: ['Handphone', 'Vape', 'Drone', 'Kamera', 'Tab', 'Laptop'],
                datasets: [{
                  label: 'Stok Produk',
                  data: [120, 80, 60, 90, 70, 130],
                  backgroundColor: ['rgba(255, 99, 132, 0.6)', 'rgba(255, 206, 86, 0.6)', 'rgba(75, 192, 192, 0.6)', 'rgba(153, 102, 255, 0.6)', 'rgba(255, 159, 64, 0.6)', 'rgba(54, 162, 235, 0.6)']
                }]
              },
              options: {
                responsive: true,
                maintainAspectRatio: false
              }
            });
            stokChartLoaded = true;
          }
        }
        // Comment functionality
        const komentarData = {
          usernames: ['AndiSaputra', 'SitiNurhaliza', 'BudiSantoso', 'RinaAnggraini', 'DewiLestari', 'FajarHidayat', 'WulanSari', 'HendraPratama', 'NinaKusuma', 'AgusWijaya', 'DinaPermata', 'ToniGunawan', 'MayaFitriani', 'RizkyAnanda', 'LiaKartika', 'ImamSetiawan', 'DesiAmelia', 'YusufRamadhan', 'AyuNingsih', 'BagusHutama', 'FitriYani', 'RezaPutra', 'MegaCahyani', 'IqbalAlamsyah', 'DediKurniawan', 'NoviSusanti', 'GalihNugroho', 'CitraMelati', 'EkoSaputro', 'RaraWidya'],
          comments: ["Produk sangat bagus dan pengirimannya cepat!", "Kualitas memuaskan, harga terjangkau.", "Saya sangat puas dengan layanan toko ini.", "Akan beli lagi, recommended seller!", "Barang sesuai deskripsi dan cepat sampai.", "Respon penjual cepat dan ramah.", "Packing aman, barang selamat sampai.", "Top banget pelayanannya!", "Barang original dan bergaransi.", "Cocok untuk hadiah juga!", "Sangat direkomendasikan!", "Barang baru, bukan bekas. Terpercaya.", "Harga bersaing dengan kualitas tinggi.", "Sesuai ekspektasi, puas sekali.", "Sistem pemesanan mudah dan cepat."],
          generateKomentar() {
            const komentar = [];
            const usedNames = new Set();
            while (komentar.length < 30) {
              const username = this.usernames[Math.floor(Math.random() * this.usernames.length)];
              if (!usedNames.has(username)) {
                usedNames.add(username);
                const rating = Math.floor(Math.random() * 5) + 1;
                komentar.push({
                  username,
                  rating,
                  stars: 'â˜…'.repeat(rating) + 'â˜†'.repeat(5 - rating),
                  text: this.comments[Math.floor(Math.random() * this.comments.length)]
                });
              }
            }
            return komentar;
          }
        };
        let semuaKomentar = [];
        let komentarPerHalaman = 5;
        let halamanAktif = 1;

        function tampilkanKomentar() {
          const container = document.getElementById('komentarContainer');
          const visible = container.style.display === 'block';
          container.style.display = visible ? 'none' : 'block';
          if (!visible) {
            semuaKomentar = komentarData.generateKomentar();
            halamanAktif = 1;
            renderKomentar();
          }
        }

        function renderKomentar() {
          const tbody = document.getElementById('komentarTableBody');
          const filterValue = document.getElementById('filterRating').value;
          let filtered = filterValue === 'all' ? semuaKomentar : semuaKomentar.filter(k => k.rating == filterValue);
          const start = (halamanAktif - 1) * komentarPerHalaman;
          const end = start + komentarPerHalaman;
          const halamanKomentar = filtered.slice(start, end);
          tbody.innerHTML = halamanKomentar.map(k => `
        
					<tr>
						<td>${k.username}</td>
						<td>${k.stars}</td>
						<td>${k.text}</td>
					</tr>
      `).join('');
        }

        function pindahHalaman(nomor) {
          halamanAktif = nomor;
          renderKomentar();
        }

        // Registrasi fungsi ke window agar bisa dipanggil dari HTML
        window.tampilkanKomentar = tampilkanKomentar;
        window.renderKomentar = renderKomentar;
        window.pindahHalaman = pindahHalaman;
        window.tampilkanChart = tampilkanChart;


      });
    </script>
  </body>
</html>